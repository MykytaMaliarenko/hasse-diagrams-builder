{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/ui/index.ts","webpack:///./src/ui/stage_1/equationInput.ts","webpack:///./src/ui/stage_1/setInput.ts","webpack:///./src/ui/actions.ts","webpack:///./src/app.ts","webpack:///./src/api/diagramsAPI.ts","webpack:///./src/render/renderData.ts","webpack:///./src/render/link.ts","webpack:///./src/render/point.ts","webpack:///./src/api/index.ts","webpack:///./src/render/index.ts","webpack:///./src/render/drawer.ts","webpack:///./src/styles/index.sass?b7d1","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./src/styles/index.sass","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./src/ui/dispatcher.ts","webpack:///./src/ui/stage_1/buildDiagramButton.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","UI","_root","dispatcher","Dispatcher","document","getElementById","hidden","components","forEach","item","init","this","EquationInput","SetInput","BuildDiagramButton","_leftSideInput","_rightSideInput","_operationSelect","root","operation","replace","validPatterns","_input","onkeydown","e","setTimeout","onInput","objs","split","el","filter","match","length","valid","v","classList","remove","contains","add","raw","res","Array","includes","push","eval","parseFloat","ACTION_GO_TO_RENDER","window","onload","ui","body","on","async","data","showSecondStage","renderData","DiagramAPI","buildDiagram","equation","set","container","mainCanvas","subCanvas","coreRender","CoreRender","render","dataset","response","api","post","JSON","stringify","ok","sorted_points","links","responseJson","json","points","line","point","Point","id","findPoint","undefined","find","link","Link","x","y","RenderData","_points","_links","_x","_y","_id","_value","active","_coords","_backendURL","_defaultHeaders","resource","headers","myHeaders","fetch","method","MARGIN_X","MARGIN_Y","_mainCanvas","_subCanvas","_width","_height","_clicked_point","onresize","sizes","w","clientWidth","h","clientHeight","_mainCanvasDrawer","drawer","_subCanvasDrawer","onmousedown","onClick","onmousemove","onMouseMove","onmouseup","onMouseUp","_renderData","calculateCoords","width","height","clear","drawPoint","drawLink","numOfLines","numOfPoints","lines","yStep","calculateYStep","lineIndex","xStep","calculateXStep","index","coords","offsetX","offsetY","every","console","log","delta","Math","abs","canvas","ctx","getContext","beginPath","arc","PI","strokeStyle","fill","stroke","fillText","moveTo","lineTo","clearRect","content","default","options","exported","locals","memo","stylesInDom","isOldIE","Boolean","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","addModulesToDom","list","base","part","css","media","sourceMap","styleInDomById","updater","addStyle","j","insertStyleElement","style","createElement","attributes","nonce","keys","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","join","applyToSingletonTag","obj","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","btoa","concat","unescape","encodeURIComponent","firstChild","singleton","singletonCounter","update","styleIndex","parentNode","removeStyleElement","newObj","newList","___CSS_LOADER_API_IMPORT___","useSourceMap","toString","map","cssMapping","sourceMapping","base64","sourceURLs","sources","source","sourceRoot","cssWithMappingToString","mediaQuery","_listeners","handler","params","listener","_button","_dispatcher","onclick","setInput","comp","equationInput","isValid","emit"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","import {Dispatcher} from \"./dispatcher\";\r\nimport {EquationInput} from \"./stage_1/equationInput\";\r\nimport {SetInput} from \"./stage_1/setInput\";\r\nimport {BuildDiagramButton} from \"./stage_1/buildDiagramButton\";\r\n\r\nexport interface UIComponent {\r\n    init(root: HTMLElement, dispatcher: Dispatcher): void\r\n\r\n    isValid(): boolean\r\n\r\n    value(): any\r\n}\r\n\r\nexport class UI {\r\n    public static readonly  components: Array<UIComponent> = [\r\n        new EquationInput(),\r\n        new SetInput(),\r\n        new BuildDiagramButton()\r\n    ];\r\n\r\n    public readonly dispatcher: Dispatcher = new Dispatcher();\r\n\r\n    constructor(private _root: HTMLElement) {\r\n        document.getElementById(\"stage2\")!!.hidden = true;\r\n        UI.components.forEach((item) => {\r\n            item.init(this._root, this.dispatcher);\r\n        });\r\n    }\r\n\r\n    public showSecondStage() {\r\n        document.getElementById(\"stage1\")!!.hidden = true;\r\n        document.getElementById(\"stage2\")!!.hidden = false;\r\n    }\r\n}","import {UIComponent} from \"../index\";\r\nimport {Dispatcher} from \"../dispatcher\";\r\n\r\nexport class EquationInput implements UIComponent {\r\n    private _leftSideInput: HTMLInputElement | null = null;\r\n\r\n    private _rightSideInput: HTMLInputElement | null = null;\r\n\r\n    private _operationSelect: HTMLSelectElement | null = null;\r\n\r\n    init(root: HTMLElement, dispatcher: Dispatcher): void {\r\n        this._leftSideInput = <HTMLInputElement> document.getElementById(\"leftEquationInput\");\r\n        this._rightSideInput = <HTMLInputElement> document.getElementById(\"rightEquationInput\");\r\n        this._operationSelect = <HTMLSelectElement> document.getElementById(\"operationSelect\");\r\n    }\r\n\r\n    isValid(): boolean {\r\n        return true;\r\n    }\r\n\r\n    private get operation(): string {\r\n        let operation = this._operationSelect!.value.replace(/\\s/g, '');\r\n        switch (operation) {\r\n            case \":\":\r\n                operation = \"::\";\r\n                break\r\n        }\r\n\r\n        return operation;\r\n    }\r\n\r\n    value(): any {\r\n        return this._leftSideInput!!.value.replace(/\\s/g, '') + this.operation +\r\n            this._rightSideInput!!.value.replace(/\\s/g, '')\r\n    }\r\n}","import {UIComponent} from \"../index\";\r\nimport {Dispatcher} from \"../dispatcher\";\r\n\r\nconst validPatterns: Array<RegExp> = [\r\n    /(\\d)+/,\r\n    /\\d+\\/\\d+/,\r\n    /(\\d)+\\*(\\d)+/,\r\n    /*/pi\\*(\\d+)/,\r\n    /pi\\\\(\\d+)/*/\r\n];\r\n\r\nexport class SetInput implements UIComponent {\r\n\r\n    private _input: HTMLInputElement | null = null;\r\n\r\n    init(root: HTMLElement, dispatcher: Dispatcher): void {\r\n        this._input = <HTMLInputElement> document.getElementById(\"setInput\");\r\n        this._input.onkeydown = (e) => setTimeout(() => this.onInput(e), 100);\r\n    }\r\n\r\n    private onInput(e: KeyboardEvent): null {\r\n        let value = this._input!!.value.replace(/\\s/g, '');\r\n        let objs = value.split(\",\");\r\n\r\n        for (let el of objs) {\r\n            if (validPatterns.filter((p) => el.match(p)!! && el.match(p)!![0].length == el.length).length == 0) {\r\n                this.valid = false;\r\n                return null;\r\n            }\r\n        }\r\n\r\n        this.valid = true;\r\n        return null;\r\n    }\r\n\r\n    private set valid(v: boolean) {\r\n        if (v) {\r\n            this._input!!.classList.remove(\"not-valid\");\r\n        } else if (!this._input!!.classList.contains(\"not-valid\")) {\r\n            this._input!!.classList.add(\"not-valid\");\r\n        }\r\n    }\r\n\r\n    isValid(): boolean {\r\n        return !this._input!!.classList.contains(\"not-valid\");\r\n    }\r\n\r\n    value(): any {\r\n        let raw = this._input!!.value.replace(/\\s/g, '').split(\",\"),\r\n            res = Array<number>();\r\n\r\n        raw.forEach(el => {\r\n           if (el.includes(\"*\") || el.includes(\"/\")) {\r\n               res.push(eval(el));\r\n           } else {\r\n               res.push(parseFloat(el));\r\n           }\r\n        });\r\n\r\n        return res;\r\n    }\r\n}","export const ACTION_GO_TO_RENDER = \"goToRender\";","import {DiagramAPI} from \"./api/diagramsAPI\";\r\nimport {CoreRender} from \"./render\";\r\n\r\nimport \"./styles/index.sass\"\r\nimport {UI} from \"./ui\";\r\nimport {ACTION_GO_TO_RENDER} from \"./ui/actions\";\r\n\r\nwindow.onload = () => {\r\n    let ui = new UI(document.body);\r\n    ui.dispatcher.on(ACTION_GO_TO_RENDER, async (data: {equation: string, set: Array<number>}) => {\r\n        ui.showSecondStage();\r\n        let renderData = await DiagramAPI.buildDiagram(data.equation, data.set),\r\n            container = document.getElementById(\"stage2\")!!,\r\n            mainCanvas = <HTMLCanvasElement> document.getElementById(\"mainCanvas\")!!,\r\n            subCanvas = <HTMLCanvasElement> document.getElementById(\"subCanvas\")!!;\r\n\r\n        let coreRender = new CoreRender(container, mainCanvas, subCanvas);\r\n        coreRender.renderData = renderData!;\r\n        coreRender.render();\r\n    });\r\n};","import {RenderData} from \"../render/renderData\";\r\nimport {Link} from \"../render/link\";\r\nimport {Point} from \"../render/point\";\r\nimport {api} from \"./index\";\r\n\r\nexport const DiagramAPI = {\r\n    buildDiagram: async (equation: string, dataset: Array<number>): Promise<RenderData | null> => {\r\n        let response = await api.post(\"diagramBuilder\",\r\n            JSON.stringify({\r\n                equation,\r\n                dataset\r\n            }),\r\n            {\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        );\r\n\r\n        if (response.ok) {\r\n            let sorted_points = Array<Array<Point>>(),\r\n                links = Array<Link>();\r\n\r\n            let responseJson = await response.json();\r\n            // @ts-ignore\r\n            responseJson.points.forEach(line => {\r\n                sorted_points.push([]);\r\n                // @ts-ignore\r\n                line.forEach(point => {\r\n                    sorted_points[sorted_points.length - 1].push(new Point(\r\n                        point.id,\r\n                        point.value,\r\n                    ));\r\n                });\r\n            });\r\n\r\n            let findPoint = (id: number): undefined | Point => {\r\n                let res: undefined | Point = undefined;\r\n                sorted_points.forEach(line => {\r\n                    if (res === undefined) {\r\n                        res = line.find(point => point.id === id)\r\n                    }\r\n                });\r\n                return res\r\n            };\r\n\r\n            // @ts-ignore\r\n            responseJson.links.forEach(link => {\r\n                links.push(new Link(\r\n                    findPoint(link.x)!!,\r\n                    findPoint(link.y)!!,\r\n                ))\r\n            });\r\n\r\n            return new RenderData(sorted_points, links);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n};","import {Point} from \"./point\";\r\nimport {Link} from \"./link\";\r\n\r\nexport class RenderData {\r\n\r\n    constructor(private _points: Array<Array<Point>>, private _links: Array<Link>) {}\r\n\r\n    get points(): Array<Array<Point>> {\r\n        return this._points\r\n    }\r\n\r\n    get links(): Array<Link> {\r\n        return this._links\r\n    }\r\n\r\n}","import {Point} from \"./point\";\r\n\r\nexport class Link {\r\n\r\n    constructor(private _x: Point, private _y: Point) {}\r\n\r\n    get x(): Point {\r\n        return this._x\r\n    }\r\n\r\n    get y(): Point {\r\n        return this._y\r\n    }\r\n}","type Coords = {\r\n    x: number\r\n    y: number\r\n}\r\n\r\n\r\nexport class Point {\r\n    public active: boolean = true;\r\n\r\n    private _coords = {\r\n        x: 0,\r\n        y: 0\r\n    };\r\n\r\n    constructor(private _id: number, private _value: number) {\r\n    }\r\n\r\n    eq(p: Point): boolean {\r\n        return this._id == p._id\r\n    }\r\n\r\n    get coords(): Coords {\r\n        return this._coords;\r\n    }\r\n\r\n    set coords(v: {x: number, y: number}) {\r\n        this._coords.x = v.x;\r\n        this._coords.y = v.y;\r\n    }\r\n\r\n    get id(): number {\r\n        return this._id\r\n    }\r\n\r\n    get value(): number {\r\n        return this._value\r\n    }\r\n}","class HttpWrapper {\r\n\r\n    constructor(private _backendURL: string, private _defaultHeaders: Record<string, string>) {\r\n    }\r\n\r\n    get(resource: string) {\r\n\r\n    }\r\n\r\n    post(resource: string, body: string, headers: Record<string, string>) {\r\n        let myHeaders = {...this._defaultHeaders, ...headers};\r\n\r\n        return fetch(`${this._backendURL}/${resource}`, {\r\n            method: \"POST\",\r\n            mode: \"cors\",\r\n            headers: myHeaders,\r\n            body\r\n        })\r\n    }\r\n}\r\n\r\nexport const api = new HttpWrapper(\"http://127.0.0.1:5000\", {});","import {RenderData} from \"./renderData\";\r\nimport {Point} from \"./point\";\r\nimport {DrawerType, drawer} from \"./drawer\";\r\n\r\nconst MARGIN_X = 40;\r\nconst MARGIN_Y = 50;\r\n\r\nexport class CoreRender {\r\n    private _renderData!: RenderData;\r\n\r\n    private _width: number = 0;\r\n    private _height: number = 0;\r\n\r\n    private _clicked_point: Point | null = null;\r\n\r\n    private _mainCanvasDrawer: DrawerType;\r\n    private _subCanvasDrawer: DrawerType;\r\n\r\n    constructor(private container: HTMLElement,\r\n                private _mainCanvas: HTMLCanvasElement, private _subCanvas: HTMLCanvasElement) {\r\n        //add event handlers\r\n        window.onresize = () => {\r\n            this.sizes = {w: container.clientWidth, h: container.clientHeight};\r\n            this.render();\r\n        };\r\n\r\n        this.sizes = {w: container.clientWidth, h: container.clientHeight};\r\n\r\n        this._mainCanvasDrawer = drawer(this._mainCanvas);\r\n        this._subCanvasDrawer = drawer(this._subCanvas);\r\n\r\n        _subCanvas.onmousedown = (e) => this.onClick(e);\r\n\r\n        _subCanvas.onmousemove = (e) => this.onMouseMove(e);\r\n\r\n        _subCanvas.onmouseup = () => this.onMouseUp();\r\n    }\r\n\r\n    set renderData(v: RenderData) {\r\n        this._renderData = v;\r\n        this.calculateCoords();\r\n    }\r\n\r\n    private set sizes(sizes: {w: number, h: number}) {\r\n        this._mainCanvas.width = sizes.w;\r\n        this._mainCanvas.height = sizes.h;\r\n\r\n        this._subCanvas.width = sizes.w;\r\n        this._subCanvas.height = sizes.h;\r\n\r\n        this._width = sizes.w;\r\n        this._height = sizes.h;\r\n    }\r\n\r\n    recalculateCoords() {\r\n        this.calculateCoords();\r\n    }\r\n\r\n    render() {\r\n        this._mainCanvasDrawer.clear();\r\n        let points = this._renderData.points;\r\n        //console.log({points});\r\n        points.forEach((line) => {\r\n            line.filter(p => p.active).forEach(point => this._mainCanvasDrawer.drawPoint(point));\r\n        });\r\n\r\n        let links = this._renderData.links;\r\n        links.filter(link => link.x.active && link.y.active).forEach(link => this._mainCanvasDrawer.drawLink(link));\r\n    }\r\n\r\n    renderSub() {\r\n        this._subCanvasDrawer.clear();\r\n        if (this._clicked_point) {\r\n            this._subCanvasDrawer.drawPoint(this._clicked_point);\r\n        }\r\n    }\r\n\r\n    private calculateYStep(numOfLines: number): number {\r\n        return (this._height - MARGIN_Y ) / numOfLines\r\n    }\r\n\r\n    private calculateXStep(numOfPoints: number): number {\r\n        return (this._width - MARGIN_X ) / numOfPoints\r\n    }\r\n\r\n    private calculateCoords() {\r\n        let lines = this._renderData.points;\r\n        let yStep = this.calculateYStep(lines.length - 1);\r\n\r\n        lines.forEach((line, lineIndex) => {\r\n            let y = this._height - (lineIndex) * yStep;\r\n\r\n            if (line.length != 1) {\r\n                let xStep =  this.calculateXStep(line.length - 1);\r\n                line.forEach((point, index) => {\r\n                    point.coords.x = xStep * index + (MARGIN_X / 2);\r\n                    point.coords.y = y - (MARGIN_Y / 2);\r\n                })\r\n            } else {\r\n                line[0].coords.x = this._width / 2 + (MARGIN_X / 2);\r\n                line[0].coords.y = y - (MARGIN_Y / 2);\r\n            }\r\n        })\r\n    }\r\n\r\n    private onClick(e: MouseEvent) {\r\n        let x = e.offsetX,\r\n            y = e.offsetY;\r\n\r\n        this._renderData.points.every(line => {\r\n            return line.every(point => {\r\n                console.log({point, delta: {x: Math.abs(point.coords.x - x), y: Math.abs(point.coords.y - y)}});\r\n                if (Math.abs(point.coords.x - x) < 10 && Math.abs(point.coords.y - y) < 10) {\r\n                    point.active = !point.active;\r\n                    this._clicked_point = point;\r\n                    return false\r\n                }\r\n                return true\r\n            })\r\n        });\r\n\r\n        this.render();\r\n        this._subCanvasDrawer.clear();\r\n        this._subCanvasDrawer.drawPoint(this._clicked_point!);\r\n    }\r\n\r\n    private onMouseMove(e: MouseEvent) {\r\n        if (this._clicked_point) {\r\n            this._clicked_point.coords = {\r\n                x: e.offsetX,\r\n                y: e.offsetY,\r\n            };\r\n            this._subCanvasDrawer.clear();\r\n            this._subCanvasDrawer.drawPoint(this._clicked_point);\r\n        }\r\n    }\r\n\r\n    private onMouseUp() {\r\n        if (this._clicked_point) {\r\n            this._subCanvasDrawer.clear();\r\n            this._clicked_point!.active = true;\r\n            this._clicked_point = null;\r\n            this.render();\r\n        }\r\n    }\r\n}","import {Point} from \"./point\";\r\nimport {Link} from \"./link\";\r\n\r\nconst POINT_RADIUS = 5;\r\nconst POINT_COLOR = \"#000000\";\r\n\r\nexport type DrawerType = {\r\n    ctx: CanvasRenderingContext2D,\r\n\r\n    drawPoint(point: Point): void,\r\n\r\n    drawLink(link: Link): void,\r\n\r\n    clear(): void\r\n}\r\n\r\n\r\nexport const drawer = (canvas: HTMLCanvasElement): DrawerType => {\r\n    let ctx = canvas.getContext(\"2d\")!;\r\n\r\n    return {\r\n        ctx,\r\n\r\n        drawPoint(point: Point) {\r\n            this.ctx.beginPath();\r\n            this.ctx.arc(point.coords.x, point.coords.y, POINT_RADIUS, 0, 2 * Math.PI);\r\n            this.ctx.strokeStyle = POINT_COLOR;\r\n            this.ctx.fill();\r\n            this.ctx.stroke();\r\n            this.ctx.fillText(`${point.value}`, point.coords.x + 10, point.coords.y);\r\n        },\r\n\r\n        drawLink(link: Link) {\r\n            this.ctx.beginPath();\r\n            this.ctx.moveTo(link.x.coords.x, link.x.coords.y);\r\n            this.ctx.lineTo(link.y.coords.x, link.y.coords.y);\r\n            this.ctx.stroke();\r\n        },\r\n\r\n        clear() {\r\n            this.ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n        }\r\n    }\r\n};","var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./index.sass\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar id = \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./index.sass\";\nvar update = api(id, content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","\"use strict\";\n\nvar stylesInDom = {};\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nfunction addModulesToDom(id, list, options) {\n  id = options.base ? id + options.base : id;\n\n  if (!stylesInDom[id]) {\n    stylesInDom[id] = [];\n  }\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var part = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n    var styleInDomById = stylesInDom[id];\n\n    if (styleInDomById[i]) {\n      styleInDomById[i].updater(part);\n    } else {\n      styleInDomById.push({\n        updater: addStyle(part, options)\n      });\n    }\n  }\n\n  for (var j = list.length; j < stylesInDom[id].length; j++) {\n    stylesInDom[id][j].updater();\n  }\n\n  stylesInDom[id].length = list.length;\n\n  if (stylesInDom[id].length === 0) {\n    delete stylesInDom[id];\n  }\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (id, list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  addModulesToDom(id, list, options);\n  return function update(newList) {\n    addModulesToDom(id, newList || [], options);\n  };\n};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".container{max-width:900px;margin:auto}.container #stage1{max-width:450px;margin:auto}.container #stage1 .row{margin-top:20px;margin-bottom:20px}.container #stage1 .divide{margin-top:40px !important}.container #stage1 .content-center{align-items:center;display:flex;justify-content:space-between}.container #stage1 input[type=text]{outline:none;border:0;border-bottom:1px solid #9e9e9e !important;padding-left:2.5px;padding-bottom:5px}.container #stage1 .full-size-input{width:100%}.container #stage1 select{border:0;outline:none}.container #stage1 p{display:inline-block;width:100%;font-size:1.5rem;margin:0}.container #stage2{position:relative;padding-top:100%}.container #stage2 canvas{position:absolute;left:0;top:0;width:100%;height:100%}.container #stage2 #mainCanvas{z-index:0}.container #stage2 #subCanvas{z-index:1}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    for (var i = 0; i < modules.length; i++) {\n      var item = [].concat(modules[i]);\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot).concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","export class Dispatcher {\r\n    private readonly _listeners: Record<string, Array<Function>> = {};\r\n\r\n    on(key: string, handler: Function) {\r\n        if (!this._listeners[key]) {\r\n            this._listeners[key] = Array<Function>();\r\n        }\r\n        this._listeners[key].push(handler);\r\n    }\r\n\r\n    emit(key: string, params = {}) {\r\n        this._listeners[key].forEach((listener) => listener(params))\r\n    }\r\n}","import {UI, UIComponent} from \"../index\";\r\nimport {Dispatcher} from \"../dispatcher\";\r\nimport {EquationInput} from \"./equationInput\";\r\nimport {SetInput} from \"./setInput\";\r\nimport {ACTION_GO_TO_RENDER} from \"../actions\";\r\n\r\nexport class BuildDiagramButton implements UIComponent {\r\n\r\n    private _button: HTMLButtonElement | null = null;\r\n\r\n    private _dispatcher: Dispatcher | null = null;\r\n\r\n    init(root: HTMLElement, dispatcher: Dispatcher): void {\r\n        this._button = <HTMLButtonElement> document.getElementById(\"buildDiagramButton\");\r\n        this._button.onclick = () => this.onClick();\r\n\r\n        this._dispatcher = dispatcher;\r\n    }\r\n\r\n    private onClick() {\r\n        let components = UI.components,\r\n            setInput = <SetInput> components.filter((comp) => comp instanceof SetInput)[0],\r\n            equationInput = <EquationInput> components.filter((comp) => comp instanceof EquationInput)[0];\r\n\r\n        if (setInput.isValid() && equationInput.isValid()) {\r\n            let data = {\r\n                equation: equationInput.value(),\r\n                set: setInput.value()\r\n            };\r\n           this._dispatcher!!.emit(ACTION_GO_TO_RENDER, data);\r\n        }\r\n    }\r\n\r\n    isValid(): boolean {\r\n        return false;\r\n    }\r\n\r\n    value(): any {\r\n    }\r\n\r\n}"],"sourceRoot":""}